<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Mapa Seleção</title>
  <style>
    @font-face {
      font-family: 'Aptos';
      src: local('Aptos'), local('Aptos Regular'); /* usa a instalada, se existir */
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    
    body {
      margin: 0;
      background: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #map {
      width: 50%;
      max-width: 1000px;
      height: 80vh;
      margin-top: 20px;
    }

    /* Oculta marca d'água do SimpleMaps */
    #simplemaps_watermark,
    #simplemaps_watermark_link {
      display: none !important;
    }

    /* Legenda personalizada */
    #legenda {
      position: absolute;
      left: 25%;
      bottom: 28%;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: 'Open Sans', sans-serif;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      z-index: 10;
    }

    .item-legenda {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
      max-width: 200px;
      gap: 12px; /* controla o espaço entre o ícone e o texto */
    }

    .texto {
      color: #333;
      word-break: break-word;
      white-space: normal;
    }

    /* Estilo visual dos ícones */
    .icone {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    .quadrado.estado {
      border-radius: 2px;
      background-color: #2db195;
    }

    .circulo.municipio {
      border-radius: 50%;
      background-color: #e2e47b;
    }

    .circulo.estado-pratica {
      border-radius: 50%;
      background-color: #f69e25;
    }

    /* ENTRADA: direita -> centro */
    @keyframes slideInRight {
      0%   { transform: translate(calc(-50% + 80px), -50%); opacity: 0; }
      100% { transform: translate(-50%, -50%);            opacity: 1; }
    }

    /* SAÍDA: centro -> direita */
    @keyframes slideOutRight {
      0%   { transform: translate(-50%, -50%);            opacity: 1; }
      100% { transform: translate(calc(-50% + 80px), -50%); opacity: 0; }
    }

    /* Estado padrão do popup (ficará oculto e posicionado no centro) */
    .popup-custom {
      position: absolute;
      background-color: #2d3e44;
      color: white;
      padding: 34px 38px; /* bem mais espaço interno */
      border-radius: 20px;
      max-width: 500px; /* largura maior */
      font-family: 'Segoe UI', sans-serif;
      font-size: 18px; /* aumenta fonte padrão */
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
      z-index: 9999;
      display: none;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%); /* posição final (centro) */
      opacity: 0;                       /* começa invisível */
      display: none; /* escondido até abrir */
    }

    /* Abrindo */
    .popup-custom.show {
      display: block;
      animation: slideInRight 300ms ease-out both;
    }

    /* Fechando */
    .popup-custom.hide {
      animation: slideOutRight 250ms ease-in both;
    }

    /* Acessibilidade: sem animação se prefer-reduced-motion */
    @media (prefers-reduced-motion: reduce) {
      .popup-custom.show,
      .popup-custom.hide {
        animation: none;
        opacity: 1;
      }
    }

    .popup-custom h3 {
      margin: 0;
      padding-bottom: 12px; /* mais espaço abaixo do título */
      font-size: 28px; /* título bem maior */
      color: #2db195;
      font-family: 'Sitka Heading', serif; /* Fonte do título */
    }

    .popup-custom p {
      margin: 0 0 18px 0;
      line-height: 1.6; /* espaçamento de leitura confortável */
      font-family: 'Open Sans', sans-serif;
    }

    .popup-custom p:last-of-type {
      margin-bottom: 0;
    }

    .popup-custom .close-btn {
      position: absolute;
      top: 18px;
      right: 22px;
      cursor: pointer;
      color: #e2e47b;
      font-weight: bold;
      font-size: 30px; /* X bem maior */
    }

    /* tenta pelos IDs oficiais da watermark */
    #simplemaps_watermark,
    #simplemaps_watermark_link {
      display: none !important;
      visibility: hidden !important;
    }

    /* tentativa alternativa: o trial usa esse title */
    a[title="For evaluation use only."] {
      display: none !important;
      visibility: hidden !important;
    }

    /* se a marca ficar DENTRO do container do mapa */
    #map a[href*="simplemaps.com"] {
      display: none !important;
      visibility: hidden !important;
    }

  </style>
</head>
<body>
  <div id="legenda">
    <div class="item-legenda">
      <div class="icone quadrado estado"></div>
      <span class="texto">Estados participantes do GA</span>
    </div>
    <div class="item-legenda">
      <div class="icone circulo municipio"></div>
      <span class="texto">Municípios que implementaram a prova prática</span>
    </div>
    <div class="item-legenda">
      <div class="icone circulo estado-pratica"></div>
      <span class="texto">Estados que implementaram a prova prática</span>
    </div>
  </div>

  <div id="map"></div>

  <!-- Acre -->
  <div id="popup-ac" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-ac')">×</span>
    <h3>Acre</h3>
    <p>O Acre lançou seu primeiro concurso com prova prática em 2024. A previsão de homologação é para o segundo semestre de 2025.</p>
  </div>

  <!-- Amazonas -->
  <div id="popup-am" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-am')">×</span>
    <h3>Amazonas</h3>
    <p>Amazonas confirmou o lançamento de concurso com prova prática em 2025.</p>
  </div>

  <!-- Ceará -->
  <div id="popup-ce" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-ce')">×</span>
    <h3>Ceará</h3>
    <p>1ª rede estadual a lançar concurso público com prova prática, em 2008. Desde então, consolidou a política lançando mais 2 concursos com prova prática, em 2013 e 2018.</p>
    <br />
    <h3>Sobral</h3>
    <p>Primeira rede de educação brasileira a realizar um concurso com prova prática, em 2007. Desde então, realizou mais dois concursos com prova prática, em 2010 e 2016.</p>
  </div>

  <!-- Mato Grosso -->
  <div id="popup-mt" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-mt')">×</span>
    <h3>Mato Grosso</h3>
    <p>
      A rede lançou um processo seletivo simplificado com prova prática no ano de 2021 e em 2025 foi publicado o primeiro concurso público com prova prática. 
      Além disso, o concurso inova na abordagem do conhecimento pedagógico solicitado, que será utilizado tanto na prova objetiva, quanto na prova prática.
    </p>
  </div>

  <!-- Paraíba -->
  <div id="popup-pb" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-pb')">×</span>
    <h3>Paraíba</h3>
    <p>Paraíba executou processo seletivo com prova prática no ano de 2023.</p>
  </div>

  <!-- Piauí / Teresina -->
  <div id="popup-pi" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-pi')">×</span>
    <h3>Teresina</h3>
    <p>Teresina executou concurso com prova prática em 2017.</p>
  </div>

  <!-- Pernambuco -->
  <div id="popup-pe" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-pe')">×</span>
    <h3>Recife</h3>
    <p>Recife executou concurso com prova prática em 2023.</p>
  </div>

  <!-- Paraná / Curitiba -->
  <div id="popup-pr" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-pr')">×</span>
    <h3>Paraná</h3>
    <p>
      A rede do Paraná realizou seu primeiro concurso público com prova prática em 2013. Desde então, executou processos seletivos simplificados com prova prática em 2020 e 2022 e outro concurso público com prova prática em 2023.
    </p>
    <br />
    <h3>Curitiba</h3>
    <p>Curitiba executou concurso com prova prática em 2019.</p>
  </div>

  <!-- Sergipe -->
  <div id="popup-se" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-se')">×</span>
    <h3>Sergipe</h3>
    <p>A rede confirmou o lançamento de concurso com prova prática em 2025.</p>
  </div>

  <!-- São Paulo -->
  <div id="popup-sp" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-sp')">×</span>
    <h3>São Paulo</h3>
    <p>São Paulo executou concurso com prova prática em 2023.</p>
  </div>

  <!-- Rio de Janeiro -->
  <div id="popup-rj" class="popup-custom">
    <span class="close-btn" onclick="fecharPopup('popup-rj')">×</span>
    <h3>Rio de Janeiro</h3>
    <p>O município do Rio de Janeiro realizou concurso com prova prática em 2013.</p>
  </div> 

  <!-- Scripts do mapa -->
  <script src="mapdata.js"></script>
  <script src="countrymap.js"></script>

  <script>
    let cliqueInterno = false;

    function abrirPopup(id) {
      cliqueInterno = true;
      setTimeout(() => (cliqueInterno = false), 0);

      // fecha qualquer outro aberto (com saída animada)
      fecharTodosPopups();

      const el = document.getElementById(id);
      if (!el) return;

      // garante estado limpo antes de abrir
      el.classList.remove('hide');
      el.style.display = 'block';

      // reinicia a animação de entrada
      el.classList.remove('show');
      void el.offsetWidth; // reflow
      el.classList.add('show');
    }

    function fecharPopup(id) {
      const el = document.getElementById(id);
      if (!el) return;

      // se já está fechando, ignora
      if (el.classList.contains('hide')) return;

      // remove classe de abertura, aplica saída
      el.classList.remove('show');
      el.classList.add('hide');

      // quando terminar a animação, esconde de vez e limpa classe
      const onEnd = (e) => {
        if (e.target !== el) return;
        el.style.display = 'none';
        el.classList.remove('hide');
        el.removeEventListener('animationend', onEnd);
      };
      el.addEventListener('animationend', onEnd);
    }

    function fecharTodosPopups() {
      document.querySelectorAll('.popup-custom').forEach((p) => {
        if (p.style.display !== 'block') return; // já fechado
        p.classList.remove('show');
        p.classList.add('hide');
        const onEnd = (e) => {
          if (e.target !== p) return;
          p.style.display = 'none';
          p.classList.remove('hide');
          p.removeEventListener('animationend', onEnd);
        };
        p.addEventListener('animationend', onEnd);
      });
    }

    // Fecha ao clicar fora
    document.addEventListener('click', function (event) {
      const isInsidePopup = event.target.closest('.popup-custom');
      const isLegenda = event.target.closest('#legenda');
      if (!cliqueInterno && !isInsidePopup && !isLegenda) {
        fecharTodosPopups();
      }
    });
  </script>

  <script>
    window.addEventListener('load', function () {
      // remover por IDs comuns
      ['simplemaps_watermark', 'simplemaps_watermark_link']
        .forEach(id => { const el = document.getElementById(id); if (el) el.remove(); });

      // remover o link do trial (não remove pais com outros nós)
      document.querySelectorAll('a[title="For evaluation use only."]').forEach(el => el.remove());
    });
  </script>
</body>
</html>